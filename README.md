# Задание: Проектная работа 6
Данный репозиторий содержит решения на задание: Проектная работа 6

Назначение репозитория - конфигурация трех удаленных машин при помощи Ansible. Для выполнения данной задачи создан плейбук **main.yml**. 

## Обзор инфраструктуры

Следуя указаниям задания были созданы 3 машины в сервисе Yadnex.Cloud:

- **vm1** - Машина под управлением ОС Ubuntu 20.04 lts с установленным Ansible. С данной машины производился запуск созданного плейбука.
- **vm2** - Машина под управлением ОС Ubuntu 20.04 lts. На данную машину устанавливается Docker через пейбук.
- **vm3** - Машина под управлением ОС CentOs 8 Stream*. На данную машину устанавливается Docker через пейбук.

**прим. По заданию требуется использовать CentOS 8, но в 2021 году на её смену в Yandex.Cloud добавили CentOs 8 Stream*

## Структура репозитория

- **dir: inventories/production** - содержит информацию о хостах, на которых будет работать Ansible.
- **dir: inventories/production/group_vars** - содержит переменные для группы хостов.
- **file: inventories/production/hosts** - содержит адреса хостов.
- **file: main.yml** - основной плейбук.
## Группы хостов Ansible

Удаленным машинам назначены алиасы в **inventories/production/hosts** и добавлены в группы по назначению:

- [app] - vm2_ubuntu, vm2_ubuntu
- [database] - vm1_ubuntu
- [web] - vm1_ubuntu

Обращение к машинам производится по их IP адрессу локальной сети.

## Теги плейбука

Для более гибкого использования плейбука были добавлены теги для определенных задач:

- **docker** - тег выполнения установки только Docker, пропуская установку и конфигурацию Postgresql.  
- **pg** - тег выполнения установки и конфигурации только Postgresql, пропуская установку Docker.
- **check_service** - тег проверки состояния сервисов Docker и Postgresql (они запущены и включен запуск при старте системы)

![Логотип Ansible](https://velog.velcdn.com/images/salgu1998/post/c94c5162-95c3-4159-98bf-9f12446b381a/image.png)